tinymce.PluginManager.add("zemoticons",function(e,t){function n(e){var t=Array.from(this.querySelectorAll("a")),n=t.length,a=t.indexOf(e.target),o=null;if(37===e.keyCode||39===e.keyCode?o=37===e.keyCode?n+a-1:a+1:(38===e.keyCode||40===e.keyCode)&&(o=38===e.keyCode?n+a-4:a+4),o){var r=t[o%n];e.target.blur(),r.focus()}}e.addButton("zemoticons",{type:"panelbutton",panel:{autohide:!0,html:function e(){t=['<table role="presentation" class="mce-grid">'];var t,n=[];for(var a in tinyMCE.emoticon_map)n.push(a);for(;n.length;){t.push("<tr>");for(var o=n.splice(0,4),r=0;r<o.length;r++){var a=o[r],i=tinyMCE.emoticon_map[a];t.push('<td><a href="#" data-mce-url="'),t.push(i),t.push('" tabindex="0"><img src="'),t.push(i),t.push('" style="width: 18px; height: 18px" alt="'),t.push(a),t.push('">'),t.push("</a></td>")}t.push("</tr>")}return t.push("</table>"),t.join("")},onclick:function(t){var n=e.dom.getParent(t.target,"a");if(n){var a=e.settings.paste_data_images;e.settings.paste_data_images=!0,e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" />'),e.settings.paste_data_images=a,this.hide()}}},icon:"emoticons",tooltip:"Emoticons",onclick:function(e){var t=Array.from(document.querySelectorAll('table[class="mce-grid"]')).filter(function(e){return""===e.parentElement.style.display});t.length&&(t[0].removeEventListener("keydown",n),t[0].addEventListener("keydown",n),t[0].querySelector('img[alt="cool"]').parentElement.focus())}})});