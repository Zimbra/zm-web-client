tinymce.PluginManager.add("zemoticons",function(e,t){function n(e){let t=Array.from(this.querySelectorAll("a")),n=t.length,a=t.indexOf(e.target),o=null;if(37===e.keyCode||39===e.keyCode?o=37===e.keyCode?n+a-1:a+1:(38===e.keyCode||40===e.keyCode)&&(o=38===e.keyCode?n+a-4:a+4),o){let i=t[o%n];e.target.blur(),i.focus()}}function a(){e.id,document.querySelector('table[class="mce-grid"]').addEventListener("keydown",n)}e.addButton("zemoticons",{type:"panelbutton",panel:{autohide:!0,html:function t(){n=['<table id="'+e.id+'_emoticonPanel" role="presentation" class="mce-grid">'];var n,a=[];for(var o in tinyMCE.emoticon_map)a.push(o);for(;a.length;){n.push("<tr>");for(var i=a.splice(0,4),r=0;r<i.length;r++){var o=i[r],s=tinyMCE.emoticon_map[o];n.push('<td><a href="#" data-mce-url="'),n.push(s),n.push('" tabindex="0"><img src="'),n.push(s),n.push('" style="width: 18px; height: 18px" alt="'),n.push(o),n.push('">'),n.push("</a></td>")}n.push("</tr>")}return n.push("</table>"),n.join("")},onclick:function(t){var n=e.dom.getParent(t.target,"a");if(n){var a=e.settings.paste_data_images;e.settings.paste_data_images=!0,e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" />'),e.settings.paste_data_images=a,this.hide()}}},icon:"emoticons",tooltip:"Emoticons",onclick:function(e){var t=Array.from(document.querySelectorAll('table[class="mce-grid"]')).filter(e=>""===e.parentElement.style.display);t.length&&(t[0].removeEventListener("keydown",n),t[0].addEventListener("keydown",n),t[0].querySelector('img[alt="cool"]').parentElement.focus())}})});