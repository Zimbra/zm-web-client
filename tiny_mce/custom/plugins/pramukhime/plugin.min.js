/**
* @license
* PramukhIME TinyMCE Plugin v 4.0.3 - https://www.vishalon.net/pramukhime/tinymce-plugin
* Copyright (c) 2005-2018 Vishal Monpara (https://www.vishalon.net)
* 
* License:
* Please read license.html file for detailed license terms.
* 
* License Summary
*   This license is given to Synacor Inc. License Key: e9e135583798ba240f6cb181d37e2a02
*   Personal and Commercial use - Allowed (Except noted below)
*   Use in Software as a Service (SaaS), Distribution Application/Module/Add-on/Plugin, OEM- Not Allowed
*   Modify source code or any file? - Not Allowed
*   Hosting for sharing/distribution - Not Allowed
*/
tinymce.PluginManager.add("pramukhime",function(e,t){"use strict";var i=this,n={};n.keyboards=[{js_file:"pramukhindic.js",kb_class_name:"PramukhIndic"}],n.languages=[],n.selected_value="pramukhime:english",n.create_dedicated_pramukhime=!1,n.files_externally_loaded=!1,n.toggle_key={key:120,ctrl:!1,alt:!1,title:"F9"},n=tinymce.extend(n,e.getParam("pramukhime_options",{})),i.t={},i.t.i=n.keyboards,i.t.m=n.languages,i.t.s=n.selected_value,i.t.o="PramukhIME",i.t.u=n.create_dedicated_pramukhime,i.t.l=n.files_externally_loaded,i.t.p=n.toggle_key;var a,r,m,s,c,o,u=e.settings.language||"en",l=[7,6],p=tinymce.documentBaseURL,h=!1,g=function(){if(void 0!==o){var e=o.getLanguage(),t=e.kb+":"+e.language;a.value(t);var n=o.getLastLanguage(),r=n.kb+":"+n.language;if(a.menu)a.menu.items().each(function(e,t){e.getEl().getElementsByTagName("div")[0].innerHTML=e.value()===r?i.t.p.title:" "});else{var m=void 0===a.state?a._values:a.state.get("menu");tinymce.each(m,function(e,t){e.value===r?e.shortcut=i.t.p.title:e.shortcut=" "})}}},d=function(){if(void 0!==o){var e=o.getLanguage();r.disabled(!o.hasHelp()),r.getEl().firstChild.getElementsByTagName("i")[0].className="mce-ico mce-i-pramukhimehelp pi-"+e.kb+"-"+e.language+"-help"}},f=function(){if(void 0!==o){var e=o.getLanguage();m.disabled(!o.hasSettings()),m.getEl().firstChild.getElementsByTagName("i")[0].className="mce-ico mce-i-pramukhimesettings pi-"+e.kb+"-"+e.language+"-settings"}},v=function(){if(void 0!==o){var e=o.getLanguage();c.getEl().firstChild.getElementsByTagName("i")[0].className="mce-ico mce-i-pramukhimeresetsettings pi-"+e.kb+"-"+e.language+"-resetsettings"}},y=function(){if(void 0!==o){var e=o.getLastLanguage();s.getEl().firstChild.getElementsByTagName("i")[0].className="mce-ico mce-i-pramukhimetogglelanguage pi-"+e.kb+"-"+e.language}},k=0,b=function(){if(0!==k){o=i.t.u?pramukhIME.createPramukhIME():pramukhIME,e.pramukhime=o;(h=p.length>=Math.max(1,5,9)&&p.charCodeAt(1)-100==5&&p.charCodeAt(5)-100==8&&p.charCodeAt(9)-100==1||0==p.length||!1)||(h="undefined"!=typeof Dwt);var t=function(){a&&g(),r&&d(),m&&f(),c&&v(),s&&y()};h&&o.on("languagechange",t),o.setToggleKey(i.t.p.key,i.t.p.ctrl||!1,i.t.p.alt||!1);var n=[],u=i.t.m.length>0;tinymce.each(i.t.i,function(t){if(void 0===t.kb_class_name)return!0;var n=new(0,tinymce.DOM.win[t.kb_class_name]);if(o.addKeyboard(n),u)return!0;var a=n.getKeyboardName();tinymce.each(n.getLanguages(),function(n,r){i.t.m.push({value:a+":"+n,text:e.editorManager.i18n.translate("pramukhime."+t.kb_class_name.toLowerCase()+"."+n)})})}),u||i.t.m.push({value:"pramukhime:english",text:"English"}),n=i.t.m,tinymce.each(n,function(e,t){e.shortcut=" ",e.value===i.t.s&&(i.t.o=e.text)}),""!==i.t.s?o.setLanguage(i.t.s.split(":")[1],i.t.s.split(":")[0]):t(),a&&a.state.set("text",i.t.o),e.inline&&h?o.enable([e.getElement()]):e.getWin().frameElement&&h&&o.enable([e.getWin().frameElement])}else k++};if(function(){var e,t=String.fromCharCode,i=t(l[1]+40);""!==(e=p.split(t(l[0]+40))[2])?(e=e.split(i),p=e.length>=2?e.join(""):""):p=e,p=p.split("").reverse().join("")}(),i.t.l)k+=1;else{var P=[],M=[],w="";if(w=t+"/js/pramukhime.js",tinymce.ScriptLoader.isDone(w)||P.push(w),tinymce.each(i.t.i,function(e,i){void 0!==e.js_file&&(w=t+"/js/"+e.js_file,tinymce.ScriptLoader.isDone(w)||P.push(w),M.push(t+"/js/"+e.kb_class_name.toLowerCase()+"_settings.js"),w=t+"/langs/"+(e.i18n_js_file||u+"_"+e.kb_class_name.toLowerCase())+".js",tinymce.ScriptLoader.isDone(w)||P.push(w),tinymce.DOM.loadCSS(t+"/css/"+e.kb_class_name.toLowerCase()+".css"))}),0!==P.length){var I=0,E=function(){},_=function(){++I===P.length&&(b(),tinymce.each(M,function(e,t){tinymce.ScriptLoader.load(e)}),tinymce.ScriptLoader.loadQueue(E))};tinymce.each(P,function(e,t){tinymce.ScriptLoader.load(e,_)}),tinymce.ScriptLoader.loadQueue(E)}else b()}e.on("postrender",b),e.addCommand("mcePramukhIMEHelp",function(){var i=o.getLanguage(),n=e.editorManager.i18n.translate,a=e.windowManager.open({title:"PramukhIME Help",bodyType:"tabpanel",padding:10,body:[{title:"Quick Typing Help",type:"container",style:"overflow:auto;",html:"<div>"+n("pramukhime."+i.kb+".help_quick_help1")+'</div><div><img src="'+t+"/img/"+i.kb+"-"+i.language+'.png" /></div><div>'+n("pramukhime."+i.kb+".help_quick_help2")+"</div>"},{title:"Detailed Typing Help",type:"container",html:'<iframe src="'+t+"/help/"+o.getHelp()+'"></iframe>'},{title:"About",type:"container",html:"<div>"+n("PramukhIME 4.0.1")+"<br /><br />"+n("TinyMCE Supported Version: 4.x")+"<br /><br />"+n("PramukhIME plugin is a platform independent web based typing plugin derived from PramukhIME")+"<br />"+n('javascript library (<a href="https://www.vishalon.net/pramukhime/javascript-library" target="_blank">https://www.vishalon.net/pramukhime/javascript-library</a>). It is developed by')+"<br />"+n('Vishal Monpara (<a href="https://www.vishalon.net" target="_blank">https://www.vishalon.net</a>). Please visit the website to get latest version of this')+"<br />"+n("plugin as well as other resources.")+"<br /><br />"+n("Copyright &copy; Vishal Monpara")+"<br /><br /></div><hr /><div>"+n("pramukhime."+i.kb+".help_about_kb")+"</div>"}],buttons:[{text:"Close",subtype:"primary",onclick:function(){a.close()}}]})}),e.addCommand("mcePramukhIMESettings",function(){var e=o.getLanguage(),t=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",buttons:[{text:"Save",subtype:"primary",onclick:function(){o.setSettings(o.getKeyboard().getUpdatedSettings(t)),t.close()}},{text:"Close",name:"close",onclick:function(){t.close()}}],title:"pramukhime."+e.kb+".settings",items:{type:"form",padding:20,labelGap:30,spacing:10,items:o.getKeyboard().getSettingsItems()}}).renderTo().reflow()}),e.addCommand("mcePramukhIMEResetSettings",function(){e.windowManager.confirm("Are you sure you want to reset keyboard settings?",function(e){e&&o.resetSettings()})}),e.addCommand("mcePramukhIMEToggleLanguage",function(){o.toggleLanguage()}),e.addButton("pramukhimesettings",{title:"Change Keyboard Settings",cmd:"mcePramukhIMESettings",disabled:!0,onPostRender:function(){m=this,f()}}),e.addButton("pramukhimeresetsettings",{title:"Reset Keyboard Settings",cmd:"mcePramukhIMEResetSettings",onPostRender:function(){c=this,v()}}),e.addButton("pramukhimehelp",{title:"PramukhIME Typing Help",cmd:"mcePramukhIMEHelp",disabled:!0,onPostRender:function(){r=this,d()}}),e.addButton("pramukhimetogglelanguage",{title:"Last Selected Language",cmd:"mcePramukhIMEToggleLanguage",onPostRender:function(){s=this,y()}}),e.addButton("pramukhime",{type:"listbox",text:i.t.o,tooltip:"Select Language",values:i.t.m,value:null,onselect:function(t){var i=t.control.value();e.pramukhime.setLanguage(i.split(":")[1],i.split(":")[0])},onPostRender:function(){a=this,g()}})});