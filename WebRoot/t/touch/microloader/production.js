(function(n){function r(a){function b(a,j){var c=a.length,b,d;for(b=0;b<c;b++){d=a[b];var g=a,J=b,k=void 0;"string"==typeof d&&(d={path:d});d.shared?(d.version=d.shared,k=d.shared+d.path):(y.href=d.path,k=y.href);d.uri=k;d.key=e+"-"+k;f[k]=d;g[J]=d;d.type=j;d.index=b;d.collection=a;d.ready=!1;d.evaluated=!1}return a}var c;"string"==typeof a?(c=a,a=z(c)):c=JSON.stringify(a);var e=a.id,g=e+"-"+A+o,f={};this.key=g;this.css=b(a.css,"css");this.js=b(a.js,"js");this.assets=this.css.concat(this.js);this.getAsset=function(a){return f[a]};this.store=function(){s(g,c)}}function v(a,b){i.write('<meta name="'+a+'" content="'+b+'">')}function p(a,b,c){var e=new XMLHttpRequest,c=c||B,a=a+(-1==a.indexOf("?")?"?":"&")+Date.now();try{e.open("GET",a,!0),e.onreadystatechange=function(){if(4==e.readyState){var a=e.status,g=e.responseText;200<=a&&300>a||304==a||0==a&&0<g.length?b(g):c()}},e.send(null)}catch(g){c()}}function K(a,b){var c=i.createElement("iframe");m.push({iframe:c,callback:b});c.src=a+".html";c.style.cssText="width:0;height:0;border:0;position:absolute;z-index:-999;visibility:hidden";i.body.appendChild(c)}function C(a,b,c){var e=!!a.shared;if(!e)var g=b,f=a.version,h,b=function(j){h=j.substring(0,f.length+4);h!=="/*"+f+"*/"?confirm("Requested: '"+a.uri+"' with checksum: "+f+" but received: "+h.substring(2,f.length)+"instead. Attempt to refresh the application?")&&L():g(j)};(e?K:p)(a.uri,b,c)}function D(a){var b=a.data,a=a.source.window,c,e,g,f;for(c=0,e=m.length;c<e;c++)if(g=m[c],f=g.iframe,f.contentWindow===a){g.callback(b);i.body.removeChild(f);m.splice(c,1);break}}function E(a){"undefined"!=typeof console&&(console.error||console.log).call(console,a)}function s(a,b){try{l.setItem(a,b)}catch(c){if(c.code==c.QUOTA_EXCEEDED_ERR){var e=t.assets.map(function(a){return a.key}),g=0,f=l.length,h=!1,j;for(e.push(t.key);g<=f-1;)j=l.key(g),-1==e.indexOf(j)?(l.removeItem(j),h=!0,f--):g++;h&&s(a,b)}}}function u(a){try{return l.getItem(a)}catch(b){return null}}function L(){F||(F=!0,p(o,function(a){(new r(a)).store();n.location.reload()}))}function G(a){function b(a,b){var e=a.collection,d=a.index,g=e.length,f;a.ready=!0;a.content=b;for(f=d-1;0<=f;f--)if(a=e[f],!a.ready||!a.evaluated)return;for(f=d;f<g;f++)if(a=e[f],a.ready)a.evaluated||c(a);else break}function c(a){a.evaluated=!0;if("js"==a.type)try{eval(a.content)}catch(b){E("Error evaluating "+a.uri+" with message: "+b)}else{var c=i.createElement("style"),d;c.type="text/css";c.textContent=a.content;"id"in a&&(c.id=a.id);"disabled"in a&&(c.disabled=a.disabled);d=document.createElement("base");d.href=a.path.replace(/\/[^\/]*$/,"/");w.appendChild(d);w.appendChild(c);w.removeChild(d)}delete a.content;0==--f&&e()}function e(){function c(){e&&b()}function b(){var a=q.onUpdated||B;if("onSetup"in q)q.onSetup(a);else a()}function f(){l.store();d.forEach(function(a){s(a.key,a.content)});b()}var d=[],e=!1,g=!1,k=function(){g=!0},i=function(){h.swapCache();e=!0;k()},m;n.removeEventListener("message",D,!1);h.status==h.UPDATEREADY?i():h.status==h.CHECKING||h.status==h.DOWNLOADING?(h.onupdateready=i,h.onnoupdate=h.onobsolete=function(){k()}):k();!1!==navigator.onLine&&p(o,function(b){t=l=new r(b);var e;l.assets.forEach(function(b){e=a.getAsset(b.uri);(!e||b.version!==e.version)&&d.push(b)});m=d.length;0==m?g?c():k=c:d.forEach(function(b){function c(){C(b,function(a){b.content=a;0==--m&&(g?f():k=f)})}var d=a.getAsset(b.uri),e=b.path,h=b.update;!d||!h||null===u(b.key)||"delta"!=h?c():p("deltas/"+e+"/"+d.version+".json",function(a){try{var c=b,d;var e=u(b.key),h=z(a),a=[],j,i,l;if(0===h.length)d=e;else{for(i=0,l=h.length;i<l;i++)j=h[i],"number"===typeof j?a.push(e.substring(j,j+h[++i])):a.push(j);d=a.join("")}c.content=d;0==--m&&(g?f():k=f)}catch(n){E("Malformed delta content received for "+b.uri)}},c)})})}var g=a.assets,f=g.length,l;t=a;H("message",D,!1);0==f?e():g.forEach(function(a){var c=u(a.key);null===c?C(a,function(c){s(a.key,c);b(a,c)},function(){b(a,"")}):b(a,c)})}function I(a){null!==i.readyState.match(/interactive|complete|loaded/)?G(a):H("DOMContentLoaded",function(){G(a)},!1)}var B=function(){},m=[],i=n.document,w=i.head,H=n.addEventListener,l=n.localStorage,h=n.applicationCache,z=JSON.parse,y=i.createElement("a"),x=i.location,A=x.origin+x.pathname+x.search,o="app.json",F=!1,t;if("undefined"===typeof q)var q=n.Ext={};q.blink=function(a){var b=u(a.id+"-"+A+o);v("viewport","width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no");v("apple-mobile-web-app-capable","yes");v("apple-touch-fullscreen","yes");b?(a=new r(b),I(a)):p(o,function(b){a=new r(b);a.store();I(a)})}})(this);